!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n){function t(e,n){var t=$(e),r=t.parent().find(".error-message");0===r.length&&(r=$('<span class="error-message"></span>'),t.parent().append(r)),r.text(n),r.show()}function r(e,n){$(e).parent().find(".error-message").hide()}var o=function(e){return"http://huziketang.com/api/react-books"+e},a=function(){var e=function(){i(function(e){e||m()}),setTimeout(e,5e3)};e()},i=function(e){var n=c();if(!n||!n.email||!n.readCode)return e(!1);$.ajax({url:o("/checkIfGranted/"+n.email+"/"+n.readCode),type:"GET",success:function(n){e(n.data)},error:function(e){console.log(e)}})},c=function(){try{return JSON.parse(localStorage.getItem("reader"))}catch(e){return null}},u=function(e,n){try{return localStorage.setItem("reader",JSON.stringify({email:e,readCode:n}))}catch(e){return null}},l=(window.alert,$("#mask-template").remove().html()),d=function(){for(var e=f(),n="",t=0;t<e;t++)n+=s("qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXC_VBNM1234567890-");return"#"+n},f=function(){return 2+Math.floor(10*Math.random())},s=function(e){return e[Math.floor(Math.random()*e.length)]},p="",m=function(){var e=p;p=d();var n=$(l);n.css({position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.9)",top:0,left:0}),n.attr("id",p.replace("#","")),$(document.body).append(n),e&&$(e).remove(),$("#granted-modal").show()},h=function(){$(window).on("keydown",function(e){e.ctrlKey&&83===e.keyCode&&(e.preventDefault(),window.location.href="http://baidu.com"),e.metaKey&&83===e.keyCode&&(e.preventDefault(),window.location.href="http://baidu.com")})},v=function(){var e=$("#readcode-input-area"),n=$("#try-to-buy");$("#buy-now").on("click",function(){e.hide(),n.show()}),$("#back-to-input").on("click",function(){n.hide(),e.show()}),$("#alipay").on("click",function(){var e=$("#reader-email").val();/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?(r("#reader-email"),$("#back-to-input").click(),$("#email").val(e),$("#read-code").focus(),window.open(o("/alipay/"+e))):t("#reader-email","请输入正确的邮箱地址")})},g=function(){var e=$("#email"),n=$("#read-code");$("#check-granted").on("click",function(){u(e.val(),n.val()),i(function(e){e?($(p).remove(),$("#granted-modal").hide()):t("#email","邮箱或者阅读码不正确")})}),$("#get-read-code-form, #read-code-form").on("submit",function(e){e.preventDefault()})};(function(){var e=window.location.href.match(/lesson(\d+)/);return!!(e&&1*e[1]>=28)})()&&function(){a(),h(),v(),g()}()}]);